/*!
 *  Бюро дизайна
 *  Мы создаём хорошие веб-сайты
 *  с продуманной стратегией, дизайном и функционалом.
 *  -------------------------------------------------------
 *
 *  Контакты
 *  -------------------------------------------------------
 *  Email: unr@artismensa.ru
 *  WWW: http://artismensa.ru
 */
(function(a){a.fn.viewportChecker=function(b){var d={classToAdd:"visible",offset:40,callbackFunction:function(f){}};a.extend(d,b);var c=this.find(".vpch"),e=a(window).height();this.setDealy=function(){c.each(function(g){var h=a(this);if(h.data("delay")){var f=h.data("delay");h.css("-webkit-transition-delay",f+"s").css("transition-delay",f+"s")}})};this.checkElements=function(){var h=((navigator.userAgent.toLowerCase().indexOf("webkit")!=-1)?"body":"html"),f=a(h).scrollTop(),g=(f+e);c.each(function(l){var m=a(this);if(m.hasClass(d.classToAdd)){}var j=Math.round(m.offset().top)+d.offset,k=j+(m.height());if(j<g){m.addClass(d.classToAdd);d.callbackFunction(m)}else{m.removeClass(d.classToAdd);d.callbackFunction(m)}})};a(window).scroll(this.checkElements);this.setDealy();this.checkElements();a(window).resize(function(f){e=f.currentTarget.innerHeight})}})(jQuery);$(function(){var d=$("#rama");var b={width:"100%",maxwidth:"100%",height:480,maxheight:480,margin:0,allowfullscreen:false,nav:"dots",arrows:false,fit:"cover",shadows:false,loop:true,autoplay:7000,transitionduration:700,click:false};d.fotorama(b);var c=$(".shopItemGallery");var b={width:"100%",maxwidth:"100%",margin:0,allowfullscreen:false,nav:"thumbs",arrows:false,fit:"cover",shadows:false,loop:true,click:false,thumbmargin:20};c.fotorama(b);$(".itemProps button").click(function(){$(this).toggleClass("active");$(".itemProps .propGroup").toggleClass("active")});var a={show:function(){$("body").css("cursor","wait");var e=$("#preloader");e.remove();e=$("<div></div>").appendTo(document.body).prop("id","preloader").append('<div class="circle-preloader"></div>')},hide:function(){$("#preloader").delay(700).fadeOut("slow",function(){$("#preloader").remove()});$("body").css("cursor","auto")},showcart:function(){var e=$("#add-cart-tooltip");e.remove();var e=$("<div></div>").appendTo($("#cart")).prop("id","add-cart-tooltip").prop("class","tooltip bottom").append('<div class="tooltip-arrow"></div><div class="tooltip-inner">Товар добавлен в&nbsp;корзину</div>');e.delay(100).queue(function(){e.addClass("fromDown fade in").dequeue()});$.preloader("hidecart")},hidecart:function(){$("#add-cart-tooltip").delay(1500).queue(function(){$("#add-cart-tooltip").removeClass("fromDown fade in").dequeue()})},};$.fn.extend({updateCaptcha:function(f,e){return this.each(function(h,g){jQuery(g).prop("src","/captcha.php?get_captcha="+f+"&height="+e+"&anc="+Math.floor(Math.random()*100000))})}});jQuery.extend({preloader:function(e){if(a[e]){return a[e].apply(this,Array.prototype.slice.call(arguments,1))}else{$.error("Method "+e+" does not exist")}},addIntoCart:function(f,g,e){$.clientRequest({path:f+"?add="+g+"&count="+e,callBack:$.addIntoCartCallback,context:$("#cart")});return false},addIntoCartCallback:function(g,e,f){$.preloader("hide");$.preloader("showcart")},clientRequest:function(e){if(typeof e.callBack=="undefined"){alert("Callback function is undefined")}$.preloader("show");var g=e.path,f={};f._=Math.round(new Date().getTime());jQuery.ajax({context:e.context,url:g,type:"POST",data:f,dataType:"json",success:e.callBack});return false},addFavorite:function(g,h,e){var f=$(e);if(f.find("i").hasClass("fa-heart-o")){f.html('<i class="fa fa-heart"></i>')}else{f.html('<i class="fa fa-heart-o"></i>')}$.clientRequest({path:g+"?favorite="+h,callBack:function(){$.preloader("hide")},context:$(e)});return false}});$("input.autocomplete").each(function(){var f=$(this);var e=Number(f.data("limit"));f.autocomplete({appendTo:$(this).parent().parent(),autoSelectFirst:true,maxHeight:"auto",serviceUrl:"/search/",minChars:2,params:{query:1,limit:e},paramName:"autocomplete",lookupLimit:e,onSelect:function(g){window.location=g.data},onSearchStart:function(){},onSearchComplete:function(){}})});$("#recount").click(function(){var e=$("#tbl_cf").find("input, select").serialize();window.location="/cart/?recount=1&"+e+"&coupon_text="+$("#coupon_text").val();return false});expromptum();$("#orderTable tbody tr").hover(function(){var h=$(this).index();var e=$(".orderContent").eq(h).html();$(this).popover({html:true,placement:"bottom",content:e});$(this).popover("show")},function(){$(this).popover("hide")})});